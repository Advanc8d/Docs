##Сниппет ViewsOnline##

[![](https://file.modx.pro/files/8/f/b/8fbfa1707d51a469803adaad32ef40d1s.jpg)](https://file.modx.pro/files/8/f/b/8fbfa1707d51a469803adaad32ef40d1.jpg)

Cниппет выводит статистику пользователей онлайн для любой страницы сайта и работает на базе таблицы просмотров от Tickets.
Может использоваться например для форума в виде:
> Читают тему 17 пользователей: гостей 15, пользователей 2 (user1, user5)

Для работы скрипту нужны:

1. установленный **pdoTools**
2. включённый **Fenom** в настройках pdoTools
3. установленный **Tickets**
4. разрешён в настройках Tickets **подсчёт просмотров гостей**

Эти дополнения бесплатны и на их базе работает сниппет **ViewsOnline**.

###Параметры сниппета###

* **tpl** — чанк для вывода информации, активно используются возможности Fenom. Плейсхолдеры чанка: **total**, **guests**, **users** и **userlist**. 
* **tpl_userlist** — чанк для вывода списка пользователей, принимает 2 плейсхолдера: **separator** и **user**.
* **separator** — разделитель для списка пользователей.
* **pid** — id страницы для вывода статистики. По умолчанию текущая.
* **min** — количество минут, в течении которых пользователь считается онлайн. По умолчанию: 15

###Примеры###

Вызываем сниппет некэшируемым на нужной нам странице:

```{'!view_online'|snippet}```


Пример вызова статистики для какой-то другой страницы:
```
{'!view_online'|snippet: [
    'pid' => 1,
]}
```

[Статья в сообществе => ][0]

[0]: https://modx.pro/solutions/9778-output-users-online-for-a-specific-page/
